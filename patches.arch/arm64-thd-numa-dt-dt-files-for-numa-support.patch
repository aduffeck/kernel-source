From 9511ed57c3aef187f9db948825d4c8d975eb6723 Mon Sep 17 00:00:00 2001
From: Ganapatrao Kulkarni <gkulkarni@caviumnetworks.com>
Date: Wed, 19 Aug 2015 22:06:47 +0530
Subject: [PATCH] numa,dt: dt files for numa support.
Patch-mainline: No, temporary patch to enable numa.

Signed-off-by: Ganapatrao Kulkarni <gkulkarni@caviumnetworks.com>
Signed-off-by: Robert Richter <rrichter@cavium.com>
Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 arch/arm64/boot/dts/cavium/thunder-88xx-2n.dtsi |  418 +++++++++++++++++++++++-
 1 file changed, 415 insertions(+), 3 deletions(-)

--- a/arch/arm64/boot/dts/cavium/thunder-88xx-2n.dtsi
+++ b/arch/arm64/boot/dts/cavium/thunder-88xx-2n.dtsi
@@ -741,9 +741,14 @@
 	timer {
 		compatible = "arm,armv8-timer";
 		interrupts = <1 13 0xff01>,
-		             <1 14 0xff01>,
-		             <1 11 0xff01>,
-		             <1 10 0xff01>;
+			     <1 14 0xff01>,
+			     <1 11 0xff01>,
+			     <1 10 0xff01>;
+	};
+
+	pmu {
+		compatible = "arm,armv8-pmuv3";
+		interrupts = <1 7 4>;
 	};
 
 	soc {
@@ -803,4 +808,411 @@
 			clock-names = "apb_pclk";
 		};
 	};
+
+	pcie0: pcie0@0x8480,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x8480 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x8010 0x00000000 0x8010 0x00000000 0x70 0x00000000>, /* mem ranges */
+			 <0x03000000 0x8300 0x00000000 0x8300 0x00000000 0x500 0x00000000>;
+	};
+
+	pcie1: pcie1@0x8490,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x8490 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x8310 0x00000000 0x8310 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x8100 0x00000000 0x8100 0x00000000 0x80 0x00000000>;
+	};
+
+	pcie2: pcie2@0x84a0,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x84a0 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x8320 0x00000000 0x8320 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x8430 0x00000000 0x8430 0x00000000 0x01 0x00000000>;
+	};
+
+	pcie3: pcie3@0x84b0,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x84b0 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x8330 0x00000000 0x8330 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x8180 0x00000000 0x8180 0x00000000 0x80 0x00000000>;
+	};
+
+	pcie4: pcie4@0x9480,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its1>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x9480 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x9010 0x00000000 0x9010 0x00000000 0x70 0x00000000>, /* mem ranges */
+			 <0x03000000 0x9300 0x00000000 0x9300 0x00000000 0x500 0x00000000>;
+	};
+
+	pcie5: pcie5@0x9490,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its1>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x9490 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x9310 0x00000000 0x9310 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x9100 0x00000000 0x9100 0x00000000 0x80 0x00000000>;
+	};
+
+	pcie6: pcie6@0x84a0,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its1>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x94a0 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x9320 0x00000000 0x9320 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x9430 0x00000000 0x9430 0x00000000 0x01 0x00000000>;
+	};
+
+	pcie7: pcie7@0x84b0,00000000 {
+		compatible = "cavium,thunder-pcie";
+		device_type = "pci";
+		msi-parent = <&its1>;
+		bus-range = <0 255>;
+		#size-cells = <2>;
+		#address-cells = <3>;
+		#stream-id-cells = <1>;
+		reg = <0x94b0 0x00000000 0 0x10000000>;  /* Configuration space */
+		ranges = <0x03000000 0x9330 0x00000000 0x9330 0x00000000 0x00 0x10000000>, /* mem ranges */
+			 <0x03000000 0x9180 0x00000000 0x9180 0x00000000 0x80 0x00000000>;
+	};
+
+	mdio@0x87e00,5003800 {
+		compatible = "cavium,octeon-3860-mdio";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x87e0 0x05003800 0x0 0x30>;
+
+		phy0: sgmii0 {
+			reg = <0> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			/* LED[2,1]: Speed, LED[3]: RX, LED[0]: TX, all open-drain */
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy1: sgmii1 {
+			reg = <1> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy2: sgmii2 {
+			reg = <2> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy3: sgmii3 {
+			reg = <3> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+
+		/* For XAUI */
+		/* phy100: xaui0 {
+			reg = <0> ;
+			compatible = "broadcom,bcm8706", "ethernet-phy-ieee802.3-c45";
+			broadcom,c45-reg-init = <1 0xc808 0xff8f 0x70>;
+		}; */
+	};
+
+	mdio@0x87e00,5003880 {
+		compatible = "cavium,octeon-3860-mdio";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x87e0 0x05003880 0x0 0x30>;
+
+		phy4: sgmii4 {
+			reg = <4> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy5: sgmii5 {
+			reg = <5> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy6: sgmii6 {
+			reg = <6> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy7: sgmii7 {
+			reg = <7> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		/* For XAUI */
+		/* phy104: xaui1 {
+			reg = <4> ;
+			compatible = "broadcom,bcm8706", "ethernet-phy-ieee802.3-c45";
+			broadcom,c45-reg-init = <1 0xc808 0xff8f 0x70>;
+		}; */
+	};
+
+	mdio@0x97e00,5003800 {
+		compatible = "cavium,octeon-3860-mdio";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x97e0 0x05003800 0x0 0x30>;
+
+		phy8: sgmii8 {
+			reg = <0> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			/* LED[2,1]: Speed, LED[3]: RX, LED[0]: TX, all open-drain */
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy9: sgmii9 {
+			reg = <1> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy10: sgmii10 {
+			reg = <2> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy11: sgmii11 {
+			reg = <3> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		/* For XAUI */
+		/* phy108: xaui2 {
+			reg = <0> ;
+			compatible = "broadcom,bcm8706", "ethernet-phy-ieee802.3-c45";
+			broadcom,c45-reg-init = <1 0xc808 0xff8f 0x70>;
+		}; */
+	};
+
+	mdio@0x97e00,5003880 {
+		compatible = "cavium,octeon-3860-mdio";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x97e0 0x05003880 0x0 0x30>;
+
+		phy12: sgmii12 {
+			reg = <4> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy13: sgmii3 {
+			reg = <5> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy14: sgmii14 {
+			reg = <6> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		phy15: sgmii15 {
+			reg = <7> ;
+			compatible = "marvell,88e1240", "ethernet-phy-ieee802.3-c22";
+			marvell,reg-init = <3 0x10 0 0x8665>,
+					<3 0x11 0 0x00aa>,
+					<3 0x12 0 0x4105>,
+					<3 0x13 0 0x8a08>;
+		};
+		/* For XAUI */
+		/* phy112: xaui3 {
+			reg = <4> ;
+			compatible = "broadcom,bcm8706", "ethernet-phy-ieee802.3-c45";
+			broadcom,c45-reg-init = <1 0xc808 0xff8f 0x70>;
+		}; */
+	};
+
+	/**BGX0**/
+	bgx0 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x87e0 0xe0000000 0x0 0x1000000>;
+
+		lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy0>;
+		};
+		lmac1 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy1>;
+		};
+		lmac2 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy2>;
+		};
+		lmac3 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy3>;
+		};
+		/* For XAUI */
+		/*  lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy100>;
+		}; */
+	};
+
+	/**BGX1**/
+	bgx1 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x87e0 0xe1000000 0x0 0x1000000>;
+
+		lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy4>;
+		};
+		lmac1 {
+			phy-handle = <&phy5>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		lmac2 {
+			phy-handle = <&phy6>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		lmac3 {
+			phy-handle = <&phy7>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		/* For XAUI */
+		/*  lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy104>;
+		}; */
+	};
+
+	/**BGX2**/
+	bgx2 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x97e0 0xe0000000 0x0 0x1000000>;
+
+		lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy8>;
+		};
+		lmac1 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy9>;
+		};
+		lmac2 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy10>;
+		};
+		lmac3 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy11>;
+		};
+		/* For XAUI */
+		/*  lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy108>;
+		}; */
+	};
+
+	/**BGX3**/
+	bgx3 {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		reg = <0x97e0 0xe1000000 0x0 0x1000000>;
+
+		lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy12>;
+		};
+		lmac1 {
+			phy-handle = <&phy13>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		lmac2 {
+			phy-handle = <&phy14>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		lmac3 {
+			phy-handle = <&phy15>;
+			local-mac-address = [ 00 00 00 00 00 00 ];
+		};
+		/* For XAUI */
+		/*  lmac0 {
+			local-mac-address = [ 00 00 00 00 00 00 ];
+			phy-handle = <&phy112>;
+		}; */
+	};
 };
